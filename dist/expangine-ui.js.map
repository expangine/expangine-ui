{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/./constants.ts","webpack://[name]/../node_modules/scrute/lib/Constants.js","webpack://[name]/../node_modules/scrute/lib/Node.js","webpack://[name]/../node_modules/scrute/lib/Dependency.js","webpack://[name]/../node_modules/scrute/lib/Watcher.js","webpack://[name]/../node_modules/scrute/lib/Link.js","webpack://[name]/../node_modules/scrute/lib/handler.js","webpack://[name]/../node_modules/scrute/lib/observe.js","webpack://[name]/../node_modules/scrute/lib/Observer.js","webpack://[name]/./Scope.ts","webpack://[name]/../node_modules/scrute/lib/watch.js","webpack://[name]/../node_modules/scrute/lib/unobserve.js","webpack://[name]/./ComponentRegistry.ts","webpack://[name]/./ComponentInstance.ts","webpack://[name]/./compilers/slot.ts","webpack://[name]/./compile.ts","webpack://[name]/./Node.ts","webpack://[name]/./compilers/default.ts","webpack://[name]/./compilers/dynamic.ts","webpack://[name]/./compilers/switch.ts","webpack://[name]/./compilers/index.ts","webpack://[name]/./compilers/component.ts","webpack://[name]/./compilers/if.ts","webpack://[name]/./compilers/for.ts","webpack://[name]/./helpers.ts","webpack://[name]/external \"expangine-runtime\"","webpack://[name]/external \"expangine-runtime-live\"","webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/startup","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__476__","__WEBPACK_EXTERNAL_MODULE__538__","DEFAULT_SLOT","COMPILER_DEFAULT","COMPILER_DYNAMIC","COMPILER_COMPONENT","DIRECTIVE_IF","DIRECTIVE_SWITCH","DIRECTIVE_FOR","DIRECTIVE_SLOT","PROPERTY","ARRAY_CHANGES","ARRAY_ITERATIONS","Node","value","this","next","prev","prototype","forEach","iterator","curr","index","toArray","out","item","push","insertAfter","last","remove","isEmpty","head","Dependency","observer","links","notify","notifyParent","deep","link","watcher","parent","destroy","liveWatchers","Watcher","expression","immediate","onResult","dirty","paused","evaluating","isWatching","update","off","result","pop","pause","resume","Link","dependency","watcherNode","dependencyNode","create","existing","handler","get","target","prop","_reciever","val","obs","Array","copy","slice","apply","arguments","max","Math","length","deepNotified","i","handleArrayChange","handleWatching","handleArrayIteration","set","deleteProperty","dep","isObservable","isObserved","observe","input","_a","_b","proxy","Proxy","revocable","Object","defineProperty","Observer","revoke","writable","configurable","enumerable","deps","Scope","data","observed","disables","watchers","addToParent","child","children","attr","defaultValue","here","has","values","exprValue","onValue","equalityCheck","async","expr","LiveRuntime","cmd","isDynamic","first","handleResult","DataTypes","_c","_d","node","extraArgs","extraConsts","reduce","a","Exprs","undefined","extraExpr","extraCmd","extra","arg","eval","w","c","enable","disable","enabled","Number","MAX_SAFE_INTEGER","unobserve","registered","dataSet","dataGet","dataHas","dataRemove","obj","priority","x","Event","register","ComponentRegistry","addComponent","comp","id","collection","name","extendComponent","base","extension","attributes","state","computed","events","slots","render","created","updated","destroyed","ComponentInstance","component","attrs","scope","outerScope","cache","args","getAttributeExpression","def","with","defs","run","options","getAttributeOptions","Boolean","callable","Error","propTypes","isFunction","props","keys","eventName","payload","emit","listener","watch","compile","changeElements","elements","Type","type","attrOptions","default","slotName","getSlotOptions","arrayLength","isObject","maxSlotIndex","slotIndex","parseInt","isNumber","slotInput","getSlots","truthy","falsy","getMissing","getChildren","getCompiler","template","tag","key","getCompilerName","compilers","isString","mount","replace","rootScope","refs","instance","compiled","isStyleElement","style","isArray","isNamedSlots","parentNode","removing","Set","previousSibling","desired","current","nextSibling","delete","insertBefore","firstChild","appendChild","removeChild","splice","createChildNodes","sharedScope","scopes","document","createTextNode","isWatchable","textNode","text","textContent","childNode","childElement","setMany","s","modifierHandlers","prevent","el","ev","preventDefault","stop","stopPropagation","hasModifier","modifiers","modifier","indexOf","exists","getPropertySetter","propPath","path","split","option","tagSupportByProperty","toLowerCase","property","attribute","tags","stringify","getPropertyOptions","forStyle","useProperty","includes","e","n","removeAttribute","convertToString","stringValue","setAttribute","abbr","accept","acceptCharset","accessKey","action","allow","allowdirs","allowfullscreen","allowPaymentRequest","as","autocapitalize","autocomplete","autofocus","autoplay","alt","caption","class","className","charset","cite","contentEditable","coords","color","cols","colSpan","content","controls","crossOrigin","csp","currentTime","dataset","decoding","defaultMuted","defaultPlaybackRate","defaultSelected","defer","dirName","dir","disabled","disableRemotePlayback","download","draggable","encoding","enctype","face","files","for","form","formAction","formEnctype","formMethod","formNoValidate","formTarget","hash","height","hidden","host","hostname","href","hreflang","httpEquiv","inert","innerHTML","innerText","isMap","label","lang","loading","loop","kind","maxLength","media","mediaGroup","menu","method","min","minLength","multiple","muted","noValidate","noModule","open","outerHTML","password","pathname","pattern","placeholder","playbackRate","port","poster","protocol","readOnly","referrerPolicy","rel","returnValue","required","reversed","rows","rowSpan","scrollTop","sandbox","search","select","selected","selectedIndex","selectionStart","selectionEnd","selectionDirection","shape","size","sizes","src","srcset","srcdoc","srclang","span","start","step","tabIndex","title","typeMustMatch","useMap","username","volume","validationMessage","validity","width","wrap","map","y","filter","join","converted","String","CompilerSwitch","childSlots","directiveName","substring","createComment","childScope","createChild","cases","mode","isEqual","AnyOps","caseName","case","than","lastVisibleSlot","lastController","nextTemplate","setEnabled","hideElements","hide","display","nextController","showElements","show","element","createElement","attrValue","v","eventParts","shift","eventValue","listenerOptions","once","passive","capture","addEventListener","nativeEvent","eventObject","childs","childController","lastScope","tagValue","dynamicInstance","parentComponent","componentBase","localScope","addRef","ref","attrInput","initial","changed","stateName","stateProvider","stateValue","evalNow","computedName","computedProvider","computedValue","eventTypeInput","eventType","on","BooleanOps","componentSlots","slotOverride","slotScope","slotOptions","slotIndexName","arrayIndexAlias","scopeKey","scopeValue","controller","itemTemplate","items","propItem","propIndex","propKey","getKey","Map","newChildren","callback","isSet","entries","iterateCollection","itemIndex","itemScopeData","itemKey","itemController","updateScopes","itemScope","add","createIf","condition","createIfs","createIfElse","otherwise","tmpl","createShow","createHide","createSwitch","defaultCase","createComponent","createFor","createSlot","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","d","definition","o","hasOwnProperty","call","r","Symbol","toStringTag"],"mappings":"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","file":"expangine-ui.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"expangine-runtime\"), require(\"expangine-runtime-live\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"expangine-runtime\", \"expangine-runtime-live\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"expangine-ui\"] = factory(require(\"expangine-runtime\"), require(\"expangine-runtime-live\"));\n\telse\n\t\troot[\"expangine-ui\"] = factory(root[\"expangine-runtime\"], root[\"expangine-runtime-live\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__476__, __WEBPACK_EXTERNAL_MODULE__538__) {\nreturn ","\nexport const DEFAULT_SLOT = 'default';\nexport const COMPILER_DEFAULT = '*';\nexport const COMPILER_DYNAMIC = ':dynamic';\nexport const COMPILER_COMPONENT = ':component';\nexport const DIRECTIVE_IF = ':if';\nexport const DIRECTIVE_SWITCH = ':switch';\nexport const DIRECTIVE_FOR = ':for';\nexport const DIRECTIVE_SLOT = ':slot';","/**\n * The hidden property which stores the reference to the Observer for an object.\n */\nexport var PROPERTY = '$obs';\n/**\n * This is a map of array functions which modify the contents of an array. When\n * this happens the observed array is checked for referential and length changes.\n */\nexport var ARRAY_CHANGES = {\n    'pop': 1,\n    'push': 1,\n    'shift': 1,\n    'unshift': 1,\n    'reverse': 1,\n    'splice': 1,\n    'sort': 1,\n};\n/**\n * This is a map of array functions which can return different results when the\n * array is modified with the above functions. When these functions are called\n * the watch function observes all items in the array and it's length.\n */\nexport var ARRAY_ITERATIONS = {\n    'concat': 1,\n    'every': 1,\n    'fill': 1,\n    'filter': 1,\n    'find': 1,\n    'findIndex': 1,\n    'forEach': 1,\n    'includes': 1,\n    'indexOf': 1,\n    'join': 1,\n    'lastIndexOf': 1,\n    'map': 1,\n    'reduce': 1,\n    'reduceRight': 1,\n    'slice': 1,\n    'some': 1,\n};\n//# sourceMappingURL=Constants.js.map","/**\n * A node in a doubly-linked list. The functions in this class are mostly\n * intended for use by the head node. A default head node points to itself and\n * has a null value. A node always has a next or previous node reference.\n */\nvar Node = /** @class */ (function () {\n    /**\n     * Creates a new node given a value.\n     *\n     * @param value The value for the node.\n     */\n    function Node(value) {\n        this.value = value;\n        this.next = this.prev = this;\n    }\n    /**\n     * Iterates over the nodes in the linked list and returns the number of nodes\n     * in the list.\n     *\n     * @param iterator The function to call with the value of the node, the\n     *    reference to the node (useful for removing the value from the list),\n     *    and the index of the value in the list starting at the next node.\n     */\n    Node.prototype.forEach = function (iterator) {\n        var curr = this.next;\n        var index = 0;\n        while (curr !== this) {\n            var next = curr.next;\n            iterator(curr.value, curr, index);\n            curr = next;\n            index++;\n        }\n        return index;\n    };\n    /**\n     * Returns the items in this list as an array.\n     */\n    Node.prototype.toArray = function () {\n        var out = [];\n        this.forEach(function (item) { return out.push(item); });\n        return out;\n    };\n    /**\n     * Inserts this Node after the given node.\n     *\n     * @param prev The node to insert this Node after.\n     */\n    Node.prototype.insertAfter = function (prev) {\n        this.next = prev.next;\n        this.prev = prev;\n        this.prev.next = this.next.prev = this;\n    };\n    /**\n     * If this is the head of a list, this function adds a node to the very end\n     * of the list. This is also equivalent to adding the given node directly\n     * before this node.\n     *\n     * @param last The node to insert at the end of the list / before this node.\n     */\n    Node.prototype.push = function (last) {\n        last.insertAfter(this.prev);\n    };\n    /**\n     * If this Node is in a list, it removes itself from the list.\n     */\n    Node.prototype.remove = function () {\n        if (!this.isEmpty()) {\n            this.next.prev = this.prev;\n            this.prev.next = this.next;\n            this.prev = this.next = this;\n        }\n    };\n    /**\n     * Returns whether the list this node is in is empty.\n     */\n    Node.prototype.isEmpty = function () {\n        return this.next === this;\n    };\n    /**\n     * Returns a new node for the head of the list.\n     */\n    Node.head = function () {\n        return new Node(null);\n    };\n    return Node;\n}());\nexport { Node };\n//# sourceMappingURL=Node.js.map","import { Node } from './Node';\n/**\n * A dependency is a property of an object or an item in an array.\n */\nvar Dependency = /** @class */ (function () {\n    /**\n     * Creates a new Dependency.\n     *\n     * @param observer The observer for the object.\n     */\n    function Dependency(observer) {\n        this.observer = observer;\n        this.links = Node.head();\n    }\n    /**\n     * Notifies all observing watchers that this dependency has changed. If any\n     * of the watchers are watching for deep (sub) changes the parent dependency\n     * is notified.\n     *\n     * @param notifyParent If a deep watcher is listening on this dependency,\n     *    should we notify the parent of the observer?\n     * @returns True if a deep watcher was notified.\n     */\n    Dependency.prototype.notify = function (notifyParent) {\n        if (notifyParent === void 0) { notifyParent = false; }\n        var deep = false;\n        // We need to iterate over a copy, otherwise it could get stuck in an infinite loop.\n        this.links.toArray().forEach(function (link) {\n            link.watcher.notify();\n            deep = deep || link.watcher.deep;\n        });\n        if (notifyParent && deep && this.observer.parent) {\n            this.observer.parent.notify(notifyParent);\n        }\n        return deep;\n    };\n    /**\n     * Destroys the depdendency removing it from all watchers.\n     */\n    Dependency.prototype.destroy = function () {\n        this.links.forEach(function (link) { return link.remove(); });\n    };\n    return Dependency;\n}());\nexport { Dependency };\n//# sourceMappingURL=Dependency.js.map","import { Node } from './Node';\n/**\n * An array of watcher functions which are currently executing.\n */\nexport var liveWatchers = [];\n/**\n * A class which holds a user supplied function and list of observed\n * depdendencies it references. When any of those dependencies change a watcher\n * is notified.\n */\nvar Watcher = /** @class */ (function () {\n    /**\n     * Creates a new Watcher given an expression, if it's immediate, and if the\n     * watches are deep.\n     */\n    function Watcher(expression, immediate, deep, onResult) {\n        if (immediate === void 0) { immediate = true; }\n        if (deep === void 0) { deep = false; }\n        this.expression = expression;\n        this.immediate = immediate;\n        this.deep = deep;\n        this.onResult = onResult;\n        this.dirty = false;\n        this.paused = false;\n        this.evaluating = false;\n        this.links = Node.head();\n    }\n    /**\n     * Determines whether the watch function is currently observing anything for\n     * changes.\n     */\n    Watcher.prototype.isWatching = function () {\n        return !this.links.isEmpty();\n    };\n    /**\n     * Notifies the watcher that a dependency has changed.\n     */\n    Watcher.prototype.notify = function () {\n        if (this.evaluating) {\n            return;\n        }\n        this.dirty = true;\n        if (this.immediate) {\n            this.update();\n        }\n    };\n    /**\n     * Executes the function and gathers a new list of dependencies.\n     */\n    Watcher.prototype.update = function () {\n        this.evaluating = true;\n        this.off();\n        liveWatchers.push(this);\n        try {\n            this.result = this.expression(this);\n        }\n        finally {\n            liveWatchers.pop();\n            this.dirty = false;\n            if (this.onResult) {\n                try {\n                    this.onResult(this);\n                }\n                finally {\n                    this.evaluating = false;\n                }\n            }\n            this.evaluating = false;\n        }\n    };\n    /**\n     * Stops watching for changes.\n     */\n    Watcher.prototype.off = function () {\n        this.links.forEach(function (link) { return link.remove(); });\n    };\n    /**\n     * Stops watching for changes and marks the watcher as paused.\n     */\n    Watcher.prototype.pause = function () {\n        if (!this.paused) {\n            this.off();\n            this.paused = true;\n        }\n    };\n    /**\n     * Resumes watching for changes if the watcher was paused.\n     */\n    Watcher.prototype.resume = function () {\n        if (this.paused) {\n            this.update();\n            this.paused = false;\n        }\n    };\n    return Watcher;\n}());\nexport { Watcher };\n//# sourceMappingURL=Watcher.js.map","import { Node } from './Node';\n/**\n * A relationship between a Watcher and Dependency which stores both links so\n * the lists stored in the watcher and dependency can both be removed from\n * instantly.\n */\nvar Link = /** @class */ (function () {\n    /**\n     * Creates a new Link given the Watcher and Dependency.\n     */\n    function Link(watcher, dependency) {\n        this.watcher = watcher;\n        this.dependency = dependency;\n        this.watcherNode = new Node(this);\n        this.dependencyNode = new Node(this);\n    }\n    /**\n     * Removes the relationship between the Watcher and Dependency.\n     */\n    Link.prototype.remove = function () {\n        this.watcherNode.remove();\n        this.dependencyNode.remove();\n    };\n    /**\n     * Creates a link between the given Watcher and Dependency. If a link already\n     * exists, then this function has no effect. If a link does not exist, one is\n     * created and added to both the dependency and watcher lists. A link\n     * reference is always returned.\n     */\n    Link.create = function (watcher, dependency) {\n        var existing = null;\n        dependency.links.forEach(function (link) { return existing = (link.watcher === watcher ? link : existing); });\n        if (!existing) {\n            existing = new Link(watcher, dependency);\n            dependency.links.push(existing.dependencyNode);\n            watcher.links.push(existing.watcherNode);\n        }\n        return existing;\n    };\n    return Link;\n}());\nexport { Link };\n//# sourceMappingURL=Link.js.map","import { PROPERTY, ARRAY_CHANGES, ARRAY_ITERATIONS } from './Constants';\nimport { Link } from './Link';\nimport { liveWatchers } from './Watcher';\nimport { observe, isObservable, isObserved } from './observe';\n/**\n * The handler to pass to the Proxy constructor.\n */\nexport var handler = {\n    /**\n     * Intercepts the property getting so any watch functions can gather its list\n     * of dependencies.\n     */\n    get: function (target, prop, _reciever) {\n        var val = target[prop];\n        if (prop === PROPERTY) {\n            return val;\n        }\n        var obs = target[PROPERTY];\n        if (typeof val === 'function') {\n            if (target instanceof Array) {\n                if (prop in ARRAY_CHANGES) {\n                    return handleArrayChange(target, val, obs);\n                }\n                if (prop in ARRAY_ITERATIONS) {\n                    return handleArrayIteration(target, val, obs);\n                }\n            }\n            return val;\n        }\n        return handleWatching(target, prop, val, obs);\n    },\n    /**\n     * Intercepts the property setting so all dependent watchers are notified,\n     */\n    set: function (target, prop, value, _reciever) {\n        if (value !== target[prop]) {\n            target[prop] = value;\n            var obs = target[PROPERTY];\n            obs.notify(prop, true);\n        }\n        return true;\n    },\n    /**\n     * Intercepts the property delete operator so all dependent watchers no longer\n     * listen to changes.\n     */\n    deleteProperty: function (target, prop) {\n        var obs = target[PROPERTY];\n        obs.remove(prop);\n        return true;\n    }\n};\n/**\n * If a property on an object contains an observable object/array which is not\n * yet being observered - it is replaced with a proxy. The value of the property\n * is returned.\n */\nfunction handleWatching(target, prop, val, obs) {\n    var dep = obs.dep(prop);\n    liveWatchers.forEach(function (watcher) { return Link.create(watcher, dep); });\n    if (isObservable(val) && !isObserved(val)) {\n        target[prop] = val = observe(val, { parent: dep });\n    }\n    return val;\n}\n/**\n * Returns a function which ensures when its called that all items and the\n * length of the array is watched by any live watchers.\n */\nfunction handleArrayIteration(target, val, obs) {\n    return function () {\n        var length = target.length;\n        for (var i = 0; i < length; i++) {\n            handleWatching(target, i, target[i], obs);\n        }\n        handleWatching(target, 'length', target.length, obs);\n        return val.apply(target, arguments);\n    };\n}\n/**\n * Returns a function which notifies any watched functions of changes after a\n * mutating array operation is executed.\n */\nfunction handleArrayChange(target, val, obs) {\n    return function () {\n        var copy = target.slice();\n        var result = val.apply(target, arguments);\n        var max = Math.max(copy.length, target.length);\n        var deepNotified = false;\n        for (var i = 0; i < max; i++) {\n            if (copy[i] !== target[i]) {\n                deepNotified = deepNotified || obs.notify(i);\n            }\n            if (i >= target.length) {\n                obs.remove(i);\n            }\n        }\n        if (target.length !== copy.length) {\n            deepNotified = deepNotified || obs.notify('length');\n        }\n        if (deepNotified && obs.parent) {\n            obs.parent.notify(true);\n        }\n        return result;\n    };\n}\n//# sourceMappingURL=handler.js.map","import { PROPERTY } from './Constants';\nimport { Observer } from './Observer';\nimport { handler } from './handler';\n/**\n * Observes the object/array if is not yet observed. An observed object is one\n * that can be used in watch functions and will trigger then when referenced\n * values in the observed object changes.\n *\n * @param input The object/array to observe for changes.\n * @returns The reference to the object/array or the Proxy if it is observable\n *    and has not yet been observed.\n */\nexport function observe(input, _a) {\n    var _b = (_a === void 0 ? {} : _a).parent, parent = _b === void 0 ? null : _b;\n    if (isObservable(input)) {\n        if (!input[PROPERTY]) {\n            var proxy = Proxy.revocable(input, handler);\n            input = proxy.proxy;\n            Object.defineProperty(input, PROPERTY, {\n                value: new Observer(proxy.revoke, parent),\n                writable: false,\n                configurable: true,\n                enumerable: false\n            });\n        }\n    }\n    return input;\n}\n/**\n * Determines whether the given input can be observed.\n *\n * @param input The input to test.\n */\nexport function isObservable(input) {\n    return !!(typeof input === 'object' && input !== null);\n}\n/**\n * Determines whether the given input is currently being observed.\n *\n * @param input The input to check for observation.\n */\nexport function isObserved(input) {\n    return !!(typeof input === 'object' && input !== null && input[PROPERTY]);\n}\n//# sourceMappingURL=observe.js.map","import { PROPERTY } from './Constants';\nimport { isObserved } from './observe';\nimport { Dependency } from './Dependency';\n/**\n * An observer is for an object/array and keeps track of all watched properties.\n * If the observer belongs to a sub-object on an observed object then it has a\n * parent. This parent reference is needed for deeply watched objects.\n */\nvar Observer = /** @class */ (function () {\n    /**\n     * Creates a new Observer.\n     *\n     * @param parent An optional parent dependency.\n     */\n    function Observer(revoke, parent) {\n        if (parent === void 0) { parent = null; }\n        this.revoke = revoke;\n        this.parent = parent;\n        this.deps = Object.create(null);\n    }\n    /**\n     * Returns a Dependency for the given property and creates it if it doesn't\n     * exist already.\n     *\n     * @param prop The name of the property or the index of the array element.\n     */\n    Observer.prototype.dep = function (prop) {\n        var dep = this.deps[prop];\n        if (!dep) {\n            this.deps[prop] = dep = new Dependency(this);\n        }\n        return dep;\n    };\n    /**\n     * If the given property or array element is being watched, all watchers will\n     * be notified.\n     *\n     * @param prop The name of the property or the index of the array element to\n     *    notify of changes.\n     * @param notifyParent If a deep watcher is listening on this dependency,\n     *    should we notify the parent of the observer?\n     * @returns True if a deep watcher was notified.\n     */\n    Observer.prototype.notify = function (prop, notifyParent) {\n        if (notifyParent === void 0) { notifyParent = false; }\n        var deps = this.deps;\n        if (prop in deps) {\n            return deps[prop].notify(notifyParent);\n        }\n        else if (notifyParent && this.parent) {\n            this.parent.notify(notifyParent);\n        }\n        return false;\n    };\n    /**\n     * Removes the given property or array element so it's no longer observed for\n     * changes.\n     *\n     * @param prop The name of the property or the index of the array element to\n     *    cease watching on.\n     */\n    Observer.prototype.remove = function (prop) {\n        var deps = this.deps;\n        if (prop in deps) {\n            deps[prop].destroy();\n            delete deps[prop];\n        }\n    };\n    /**\n     * Destroys this observer by destroying all dependents.\n     *\n     * @param target The object which holds this observer.\n     * @param deep If any descendant objects should be destroyed as well.\n     * @param revoke If the proxy should be revoked, making the object unusable.\n     */\n    Observer.prototype.destroy = function (target, deep, revoke) {\n        if (deep === void 0) { deep = false; }\n        if (revoke === void 0) { revoke = true; }\n        var deps = this.deps;\n        for (var prop in deps) {\n            deps[prop].destroy();\n            delete deps[prop];\n            if (deep) {\n                var value = target[prop];\n                if (isObserved(value)) {\n                    var obs = value[PROPERTY];\n                    obs.destroy(value, deep, revoke);\n                }\n            }\n        }\n        if (revoke) {\n            this.revoke();\n        }\n    };\n    return Observer;\n}());\nexport { Observer };\n//# sourceMappingURL=Observer.js.map","import { Expression, DataTypes, Exprs, ConstantExpression } from 'expangine-runtime';\nimport { LiveContext, LiveRuntime } from 'expangine-runtime-live';\nimport { Watcher, Node as LinkedNode, observe, unobserve, watch } from 'scrute';\nimport { Off } from './Node';\n\n\nexport class Scope<A extends LiveContext = any> \n{\n\n  public parent: Scope | null;\n  public observed: A;\n  public link: LinkedNode<Scope<A>>;\n  public children?: LinkedNode<Scope<A>>;\n  public disables: number;\n  public watchers: LinkedNode<Watcher>;\n  \n  public constructor(parent: Scope | null = null, data: A = Object.create(null)) \n  {\n    this.parent = parent;\n    this.observed = observe(data);\n    this.disables = 0;\n    this.link = new LinkedNode(this);\n    this.watchers = LinkedNode.head();\n  }\n\n  public createChild(data: any = {}, addToParent: boolean = true): Scope \n  {\n    const child = new Scope(this, data);\n\n    if (addToParent)\n    {\n      if (!this.children)\n      {\n        this.children = LinkedNode.head();\n      }\n\n      this.children.push(child.link);\n    }\n    \n    return child;\n  }\n\n  public get<V extends keyof A>(attr: V, defaultValue?: A[V], here: boolean = false): A[V] \n  {\n    return attr in this.observed \n      ? this.observed[attr]\n      : this.parent && !here\n        ? this.parent.get(attr, defaultValue)\n        : defaultValue;\n  }\n\n  public has(attr: string | number | symbol, here: boolean = false): attr is (keyof A)\n  {\n    return attr in this.observed\n      ? true\n      : this.parent && !here\n        ? this.parent.has(attr)\n        : false;\n  }\n\n  public set<V extends keyof A>(attr: V, value: A[V], here: boolean = false): boolean \n  {\n    if (attr in this.observed || \n       here || \n       !this.parent ||\n       !this.parent.set(attr, value))\n    {\n      this.observed[attr] = value;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  public remove<V extends keyof A>(attr: V): void \n  {\n    if (attr in this.observed)\n    {\n      delete this.observed[attr];\n    }\n    else if (this.parent)\n    {\n      this.parent.remove(attr);\n    }\n  }\n\n  public setMany(values: Partial<A>) \n  {\n    for (const prop in values)\n    {\n      this.set(prop, values[prop]);\n    }\n  }\n\n  public watch(exprValue: any, onValue: (value: any) => void, immediate: boolean = true, equalityCheck: boolean = false, async: boolean = false): Off \n  {\n    const expr = LiveRuntime.defs.getExpression(exprValue);\n    const cmd = LiveRuntime.getCommand(expr);\n\n    if (!expr.isDynamic())\n    {\n      onValue(cmd(this));\n\n      return () => {};\n    }\n\n    let first: boolean = true;\n    let last: any;\n\n    const handleResult = (result: any) => {\n      if (immediate || !first) {\n        if (first || (!equalityCheck || !DataTypes.equals(last, result))) {\n          onValue(result);\n        }\n      }\n\n      last = equalityCheck ? DataTypes.copy(result) : result;\n      first = false;\n    };\n\n    const watcher = watch(() => {\n      const result = cmd(this);\n\n      if (!async) {\n        handleResult( result );\n      }\n\n      return result;\n    }, {\n      onResult: ({ result }) => {\n        if (async) {\n          handleResult( result );\n        }\n      },\n    });\n\n    const node = new LinkedNode(watcher);\n\n    this.watchers.push(node);\n\n    return () => {\n      watcher.off();\n      node.remove();\n    };\n  }\n\n  public eval(expr: any): (() => any)\n  public eval<E extends string>(expr: any, extraArgs: E[]): ((extra: Record<E, any>) => any) \n  public eval(expr: any, extraArgs: string[] = []): ((extra?: any) => any) \n  {\n    if (extraArgs.length > 0)\n    {\n      const extraConsts: Record<string, ConstantExpression> = extraArgs.reduce(\n        (out, a) => (out[a] = Exprs.const(undefined), out), {}\n      );\n      const extraExpr = Exprs.define(extraConsts, LiveRuntime.defs.getExpression(expr));\n      const extraCmd = LiveRuntime.eval(extraExpr);\n\n      return (extra) =>\n      {\n        for (const arg of extraArgs)\n        {\n          extraConsts[arg].value = extra?.[arg];\n        }\n\n        return extraCmd(this);\n      };\n    }\n    else\n    {\n      const cmd = LiveRuntime.eval(expr);\n\n      return () => cmd(this);\n    }\n  }\n\n  public evalNow(expr: any): any\n  {\n    return this.eval(expr)();\n  }\n\n  public enable(): void \n  {\n    if (this.disables > 0) \n    {\n      this.disables--;\n      \n      if (this.disables === 0) \n      {\n        this.watchers.forEach((w) => w.resume());\n      }\n\n      if (this.children) \n      {\n        this.children.forEach((c) => c.enable());\n      }\n    }\n  }\n\n  public disable(): void \n  {\n    if (this.disables === 0) \n    {\n      this.watchers.forEach((w) => w.pause());\n    }\n    \n    if (this.children) \n    {\n      this.children.forEach((c) => c.disable());\n    }\n\n    this.disables++;\n  }\n\n  public setEnabled(enabled: boolean) \n  {\n    enabled ? this.enable() : this.disable();\n  }\n\n  public destroy(): void \n  {\n    this.link.remove();\n    this.disables = Number.MAX_SAFE_INTEGER;\n    this.watchers.forEach((w) => w.off());\n    \n    if (this.children)\n    {\n      this.children.forEach((c) => c.destroy());\n    }\n\n    unobserve(this.observed);\n  }\n\n  private static registered: boolean = false;\n\n  public static register()\n  {\n    if (!this.registered)\n    {\n      const { dataSet, dataGet, dataHas, dataRemove } = LiveRuntime;\n\n      LiveRuntime.dataGet = (obj, prop) => obj instanceof Scope ? obj.get(prop) : dataGet(obj, prop);\n      LiveRuntime.dataSet = (obj, prop, value) => obj instanceof Scope ? obj.set(prop, value) : dataSet(obj, prop, value);\n      LiveRuntime.dataHas = (obj, prop) => obj instanceof Scope ? obj.has(prop) : dataHas(obj, prop);\n      LiveRuntime.dataRemove = (obj, prop) => obj instanceof Scope ? obj.remove(prop) : dataRemove(obj, prop);\n\n      DataTypes.addCopier({\n        priority: 12,\n        copy: (x) => {\n          if (x instanceof Event) {\n            return x;\n          }\n        },\n      });\n\n      this.registered = true;\n    }\n  }\n\n  public static isWatchable(x: any): x is (Expression | [string, ...any[]])\n  {\n    return LiveRuntime.defs.isExpression(x);\n  }\n\n}\n\n\nScope.register();","import { Watcher } from './Watcher';\n/**\n * Given a function to execute, any observed objects/arrays which are referenced\n * in that function are tracked. If they change the given function will execute\n * again and a new list of dependencies is generated. A Watcher instance is\n * returned which can be used to pause, resume, or stop watching for changes.\n *\n * @param expr The function to execute when any referenced observed values change.\n * @param immediate If the function should executed as soon as a dependent value\n *    changes (true), or simply mark the returned Watcher instance as dirty (false).\n * @param deep If true, not only does the function execute when referenced\n *    values change, but also nested values.\n * @returns A new instance of Watcher.\n */\nexport function watch(expr, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.immediate, immediate = _c === void 0 ? true : _c, _d = _b.deep, deep = _d === void 0 ? false : _d, onResult = _b.onResult;\n    var watcher = new Watcher(expr, immediate, deep, onResult);\n    watcher.update();\n    return watcher;\n}\n//# sourceMappingURL=watch.js.map","import { PROPERTY } from './Constants';\nimport { isObserved } from './observe';\n/**\n * Stops all observations for the given variable. Optionally it can travel\n * through all descendant observers and unobserve them as well.\n *\n * @param input The possibly observed object.\n * @param deep If all descendant observers should be unobserved.\n * @param destroy If the proxy should be destroyed, making it unusable.\n * @returns The reference to the value passed to this function.\n */\nexport function unobserve(input, deep, destroy) {\n    if (deep === void 0) { deep = false; }\n    if (destroy === void 0) { destroy = true; }\n    if (isObserved(input)) {\n        var obs = input[PROPERTY];\n        delete input[PROPERTY];\n        obs.destroy(input, deep, destroy);\n    }\n    return input;\n}\n//# sourceMappingURL=unobserve.js.map","import { Component } from './Component';\n\n\nexport const ComponentRegistry: Record<string, Component<any, any, any, any, any>> = Object.create(null);\n\nexport function addComponent<A = never, E = never, S extends string = never, L = never, C = never>(comp: Component<A, E, S, L, C>, id?: string)\n{\n  ComponentRegistry[id || `${comp.collection}/${comp.name}`] = comp as any;\n\n  return comp;\n}\n\nexport type Extend<P, C> = [P] extends [never]\n    ? C\n    : [C] extends [never]\n        ? P\n        : P extends string\n            ? P | C\n            : { [K in keyof P]: K extends keyof C ? C[K] : P[K] } & C;\n\nexport function extendComponent<\n  A = never, E = never, S extends string = never, L = never, C = never, \n  BA = never, BE = never, BS extends string = never, BL = never, BC = never\n>(\n  base: Component<BA, BE, BS, BL, BC>, \n  extension: Partial<Component<A, E, S, L, C>>\n): Component<Extend<BA, A>, Extend<BE, E>, Extend<BS, S>, Extend<BL, L>, Extend<BC, C>>\n{\n  return {\n    collection: extension.collection || base.collection,\n    name: extension.name || base.name,\n    attributes: {\n      ...(base.attributes || {}),\n      ...(extension.attributes || {}),\n    },\n    state: {\n      ...(base.state || {}),\n      ...(extension.state || {}),\n    },\n    computed: {\n      ...(base.computed || {}),\n      ...(extension.computed || {}),\n    },\n    events: {\n      ...(base.events || {}),\n      ...(extension.events || {}),\n    },\n    slots: {\n      ...(base.slots || {}),\n      ...(extension.slots || {}),\n    },\n    render: extension.render || base.render,\n    created: extension.created || base.created,\n    updated: extension.updated || base.updated,\n    destroyed: extension.destroyed || base.destroyed,\n  } as any as Component<Extend<BA, A>, Extend<BE, E>, Extend<BS, S>, Extend<BL, L>, Extend<BC, C>>;\n}","import { Exprs, Expression, ExpressionValue, defs, isObject, isNumber, Type, ObjectType, isFunction } from 'expangine-runtime';\nimport { Scope } from './Scope';\nimport { Component, ComponentValue, ComponentSlot, TypeProvider } from './Component';\nimport { NodeInstance, NodeTemplateNamedSlots, NodeTemplateChild, Off, changeElements, getSlots } from './Node';\nimport { compile } from './compile';\nimport { isComponentSlot } from './compilers/slot';\nimport { DEFAULT_SLOT } from './constants';\n\n\nexport type ComponentInstanceAny = ComponentInstance<any, any, any, any, any>;\n\nexport class ComponentInstance<A, E, S extends string, L, C> \n{\n\n  public component: Component<A, E, S, L, C>;\n  public attrs: Partial<Record<keyof A, ExpressionValue>>;\n  public cache: Record<string, any>;\n  public scope: Scope<A & L & C & { emit: E, refs: Record<string, any> }>;\n  public outerScope: Scope;\n  public node?: NodeInstance;\n  public parent?: ComponentInstanceAny;\n  public slots?: NodeTemplateNamedSlots;\n\n  public constructor(component: Component<A, E, S, L, C>, attrs: Partial<Record<keyof A, ExpressionValue>>, scope: Scope, slots?: NodeTemplateNamedSlots, parent?: ComponentInstanceAny, outerScope?: Scope) \n  {\n    this.component = component;\n    this.attrs = attrs;\n    this.scope = scope;\n    this.outerScope = outerScope || scope;\n    this.slots = slots;\n    this.parent = parent;\n    this.cache = Object.create(null);\n  }\n\n  public call<K extends keyof A>(attr: K, args: Record<string, ExpressionValue>): Expression\n  {\n    const expr = this.getAttributeExpression(attr);\n\n    if (expr)\n    {\n      const def = Exprs.define();\n      \n      for (const arg in args)\n      {\n        def.with(arg, defs.getExpression(args[arg]));\n      }\n\n      def.run(defs.getExpression(expr));\n\n      return def;\n    }\n\n    return Exprs.noop();\n  }\n\n  public hasCallable<K extends keyof A>(attr: K): boolean\n  {\n    const options = this.getAttributeOptions(attr);\n    const expr = this.getAttributeExpression(attr);\n\n    return Boolean(options && options.callable && expr);\n  }\n\n  public hasAttribute<K extends keyof A>(attr: K): boolean\n  {\n    return Boolean(this.attrs[attr]);\n  }\n\n  public callable<K extends keyof A>(attr: K): ((args: any) => {})\n  {\n    const options = this.getAttributeOptions(attr);\n    const expr = this.getAttributeExpression(attr);\n\n    if (!options || !options.callable || !expr)\n    {\n      throw new Error(`The ${attr} is not callable.`);\n    }\n\n    const propTypes = isFunction(options.callable)\n      ? options.callable({})\n      : options.callable;\n    const props = Object.keys(propTypes.options.props);\n\n    return this.scope.eval(expr, props);\n  }\n\n  public trigger<K extends keyof E>(eventName: K, payload: E[K]): void\n  {\n    this.scope.observed.emit[eventName] = payload;\n  }\n\n  public on<K extends keyof E>(eventName: K, listener: (payload: E[K]) => any): Off \n  {\n    return this.scope.watch(\n      Exprs.get('emit', eventName),\n      listener,\n      false,\n      false,\n      true\n    );\n  }\n\n  public update(): void \n  {\n    if (this.component.updated && this.node) \n    {\n      this.component.updated(this);\n    }\n  }\n\n  public render(): void \n  {\n    this.cache = Object.create(null);\n\n    const rendered = this.component.render(this);\n    const node = compile(rendered, this, this.scope);\n\n    changeElements(this.node.elements, node.elements);\n    \n    this.node = node;\n  }\n\n  public destroy(): void \n  {\n    this.scope.destroy();\n  }\n\n  public getAttributeOptions<K extends keyof A>(attr: K): ComponentValue<A, E, S, L, C, K> | false\n  {\n    const value = this.component.attributes?.[attr];\n\n    return value\n      ? value instanceof Type\n        ? { type: value }\n        : value as ComponentValue<A, E, S, L, C, K>\n      : false;\n  }\n\n  public getAttributeExpression<K extends keyof A>(attr: K): Expression | false\n  {\n    const attrOptions = this.getAttributeOptions(attr);\n    \n    return this.attrs[attr] || (\n      attrOptions \n        ? isFunction(attrOptions.default)\n          ? attrOptions.default(this)\n          : attrOptions.default\n        : false\n    );\n  }\n\n  public getSlotArrayLength(slotName: S | 'default' = DEFAULT_SLOT): Expression\n  {\n    const options = this.getSlotOptions(slotName);\n\n    if (options && options.arrayLength)\n    {\n      return defs.getExpression(options.arrayLength);\n    }\n\n    if (this.slots && this.slots[slotName] && isObject(this.slots[slotName]))\n    {\n      const slots = this.slots[slotName];\n      let maxSlotIndex: number | undefined;\n\n      for (const slotIndex in slots)\n      {\n        const i = parseInt(slotIndex);\n\n        if (isNumber(i) && (maxSlotIndex === undefined || i > maxSlotIndex))\n        {\n          maxSlotIndex = i;\n        }\n      }\n\n      if (maxSlotIndex !== undefined)\n      {\n        return Exprs.const(maxSlotIndex + 1);\n      }\n    }\n\n    return Exprs.const(0);\n  }\n\n  public getSlotOptions(slotName: S | 'default' = 'default'): ComponentSlot<A> | false\n  {\n    if (this.component.slots)\n    {\n      const slotInput: ComponentSlot<A> | TypeProvider<A, ObjectType> = this.component.slots[slotName as S];\n\n      return isComponentSlot<A>(slotInput)\n        ? slotInput\n        : { scope: slotInput };\n    }\n\n    return false;\n  }\n\n  public getSlotSize(slotName: S | 'default' = 'default', slotIndex: number = 0): number\n  {\n    return getSlots(this.slots, slotName, slotIndex).length;\n  }\n\n  public hasSlot<T, F>(slotName: S | 'default', truthy: T, falsy: F): T | F\n  {\n    return this.slots && slotName in this.slots ? truthy : falsy;\n  }\n\n  public whenSlot(slotName: S | 'default', getMissing: () => NodeTemplateChild, getChildren: () => NodeTemplateChild): NodeTemplateChild\n  public whenSlot(slotName: S | 'default', getMissing: () => NodeTemplateChild[], getChildren: () => NodeTemplateChild[]): NodeTemplateChild[]\n  public whenSlot<R = NodeTemplateChild | NodeTemplateChild[]>(slotName: S | 'default', getMissing: () => R, getChildren: () => R): R\n  {\n    return this.slots && slotName in this.slots ? getChildren() : getMissing();\n  }\n\n}","import { Type, isObject } from 'expangine-runtime';\nimport { ComponentSlot } from '../Component';\nimport { NodeCompiler, NodeInstance, getSlots, createChildNodes } from '../Node';\nimport { DEFAULT_SLOT } from '../constants';\nimport { Scope } from '../Scope';\n\n\nexport const COMPILER_SLOT_COMMENT = 'slot';\n\nexport const COMPILER_SLOT_DEFAULT_SLOT_INDEX = 'slotIndex';\n\n\nexport const CompilerSlot: NodeCompiler = (template, component, scope, parent) => \n{\n  const [, attrs, , childSlots] = template;\n  const element = [document.createComment(COMPILER_SLOT_COMMENT)];\n  const instance: NodeInstance = { parent, component, scope, elements: element };\n\n  if (attrs)\n  {\n    const slotName = attrs.name || DEFAULT_SLOT;\n    const slotIndex = attrs.slotIndex \n      ? scope.evalNow(attrs.slotIndex) || 0\n      : 0;\n    const componentSlots = getSlots(component.slots, slotName, slotIndex);\n    const slotOverride = componentSlots.length > 0;\n    const slots = slotOverride\n      ? componentSlots\n      : getSlots(childSlots, slotName, slotIndex);\n    const slotScope = slotOverride\n      ? component.outerScope.createChild()\n      : scope.createChild();\n\n    if (attrs.slotIndex)\n    {\n      const slotOptions = component.getSlotOptions(slotName);\n      const slotIndexName = slotOptions\n        ? slotOptions.arrayIndexAlias || COMPILER_SLOT_DEFAULT_SLOT_INDEX\n        : COMPILER_SLOT_DEFAULT_SLOT_INDEX;\n\n      slotScope.set(slotIndexName, slotIndex);\n    }\n    \n    if (attrs.scope)\n    {\n      for (const scopeKey in attrs.scope)\n      {\n        const scopeValue = attrs.scope[scopeKey];\n\n        if (Scope.isWatchable(scopeValue))\n        {\n          scope.watch(scopeValue, (value) =>\n          {\n            slotScope.set(scopeKey, value, true);\n          });\n        }\n        else\n        {\n          slotScope.set(scopeKey, scopeValue, true);\n        }\n      }\n    }\n\n    if (slots)\n    {\n      const controller = createChildNodes(slots, slotScope, component, instance);\n\n      instance.elements = controller.elements;\n    }\n  }\n\n  return instance;\n};\n\nexport function isComponentSlot<A>(x: any): x is ComponentSlot<A>\n{\n  return isObject(x) && x.scope instanceof Type;\n}","\nimport { isString } from 'expangine-runtime';\nimport { ComponentRegistry } from './ComponentRegistry';\nimport { NodeCompiler, NodeTemplate, NodeInstance, changeElements, NodeTemplateTag } from './Node';\nimport { Scope } from './Scope';\nimport { ComponentInstance, ComponentInstanceAny } from './ComponentInstance';\nimport { COMPILER_COMPONENT, COMPILER_DEFAULT, COMPILER_DYNAMIC } from './constants';\nimport { compilers } from './compilers';\n\nexport function getCompiler(template: NodeTemplate): NodeCompiler  \n{\n  const [tag] = template;\n  const key = getCompilerName(tag);\n  \n  return compilers[key];\n}\n\nexport function getCompilerName(tag: NodeTemplateTag)\n{\n  return isString(tag) \n    ? tag in compilers\n      ? tag\n      : tag in ComponentRegistry\n        ? COMPILER_COMPONENT\n        : COMPILER_DEFAULT\n    : COMPILER_DYNAMIC;\n}\n\nexport function compile(template: NodeTemplate, component: ComponentInstanceAny, scope: Scope, parent?: NodeInstance): NodeInstance\n{\n  return getCompiler(template)(template, component, scope, parent);\n}\n\nexport function mount<D>(data: D, template: NodeTemplate, replace?: Node): ComponentInstanceAny\n{\n  const rootScope = new Scope<D>(null, { ...data, refs: {} });\n\n  const instance = new ComponentInstance<any, any, any, any, any>({\n    collection: 'expangine',\n    name: 'mounted',\n    attributes: {},\n    events: {},\n    slots: {},\n    state: {},\n    computed: {},\n    render: () => template,\n  }, {}, rootScope);\n\n  const compiled = compile(template, instance, rootScope);\n\n  if (replace) \n  {\n    changeElements([replace], compiled.elements);\n  }\n\n  instance.node = compiled;\n\n  return instance;\n}","import { Expression, isObject, isString, isArray, ExpressionValue } from 'expangine-runtime';\nimport { DEFAULT_SLOT } from './constants';\nimport { Scope } from './Scope';\nimport { ComponentInstanceAny } from './ComponentInstance';\nimport { compile } from './compile';\n\n\nexport type Off = () => void;\nexport type NodeTemplateTag = string | Expression;\nexport type NodeTemplateValues = Record<string, ExpressionValue>; // when value is Expression, that expression is watched\nexport type NodeTemplateEvents = Record<string, ExpressionValue | ((payload: any) => any)>;\nexport type NodeTemplateChild = string | NodeTemplate | Expression;\nexport type NodeTemplateNamedSlots = Record<string, NodeTemplateChild[] | Record<string, NodeTemplateChild[]>>;\nexport type NodeTemplateSlots = NodeTemplateChild[] | NodeTemplateNamedSlots;\n\nexport type NodeTemplate = [\n  NodeTemplateTag,\n  NodeTemplateValues?,\n  NodeTemplateEvents?,\n  NodeTemplateSlots?\n];\n\n\nexport type NodeCompiler = (template: NodeTemplate, component: ComponentInstanceAny, scope: Scope, parent?: NodeInstance) => NodeInstance;\n\nexport interface NodeInstance \n{\n  parent?: NodeInstance;\n  children?: NodeInstance[];\n  component: ComponentInstanceAny;\n  elements: Node[];\n  scope: Scope;\n}\n\n\nexport function isStyleElement(x: any): x is HTMLElement \n{\n  return !!x && isObject(x.style);\n}\n\nexport function getSlots(slots?: NodeTemplateSlots, name: string = DEFAULT_SLOT, slotIndex: number = 0): NodeTemplateChild[]\n{\n  return !slots\n    ? []\n    : isArray(slots)\n      ? slots\n      : isObject(slots) && isArray(slots[name])\n        ? slots[name]\n        : isObject(slots) && isObject(slots[name]) && isArray(slots[name][slotIndex])\n          ? slots[name][slotIndex]\n          : [];\n}\n\n\nexport function isNamedSlots(value: any): value is NodeTemplateNamedSlots\n{\n  return typeof value === 'object' && !Array.isArray(value);\n}\n\nexport function changeElements(target: Node[], elements: Node[])\n{\n  if (target.length === 0)\n  {\n    target.push(...elements);\n  }\n  else\n  {\n    const parent = target[0].parentNode;\n\n    if (parent)\n    {\n      const removing: Set<Node> = new Set(target);\n      let prev: Node = target[0].previousSibling;\n\n      for (let i = 0; i < elements.length; i++)\n      {\n        const desired = elements[i];\n        const current = prev\n          ? prev.nextSibling\n          : target[i];\n\n        removing.delete(desired);\n\n        if (current !== desired)\n        {\n          if (current)\n          {\n            parent.insertBefore(desired, current);\n          }\n          else if (!prev && parent.firstChild)\n          {\n            parent.insertBefore(desired, parent.firstChild);\n          }\n          else\n          {\n            parent.appendChild(desired);\n          }\n        }\n\n        prev = desired;\n      }\n\n      for (const remove of removing)\n      {\n        parent.removeChild(remove);\n      }\n    }\n\n    target.splice(0, target.length, ...elements);\n  }\n}\n\nexport interface NodeChildrenController\n{\n  elements: Node[];\n  updateScopes( values: any ): void;\n  destroy(): void;\n}\n\nexport function createChildNodes(children: NodeTemplateChild[], scope: Scope, component: ComponentInstanceAny, instance: NodeInstance, sharedScope: boolean = false): NodeChildrenController\n{\n  const elements: Node[] = [];\n  const scopes: Scope[] = [];\n\n  for (const child of children)\n  {\n    if (isString(child)) \n    {\n      elements.push(document.createTextNode(child));\n    } \n    else if (Scope.isWatchable(child))\n    {\n      const textNode = document.createTextNode('');\n\n      scope.watch(child, (text) =>\n      {\n        textNode.textContent = text;\n      });\n\n      elements.push(textNode);\n    }\n    else \n    {\n      const childNode = compile(child, component, scope, instance);\n\n      for (const childElement of childNode.elements)\n      {\n        elements.push(childElement);\n      }\n\n      if (childNode.scope !== scope)\n      {\n        scopes.push(childNode.scope);\n      }\n\n      if (!instance.children)\n      {\n        instance.children = [childNode];\n      }\n      else\n      {\n        instance.children.push(childNode);\n      }\n    }\n  }\n\n  return {\n    elements,\n    updateScopes(values: any) \n    {\n      scope.setMany(values);\n\n      for (const s of scopes) \n      {\n        s.setMany(values);\n      }\n    },\n    destroy() \n    {\n      if (!sharedScope) \n      {\n        scope.destroy();\n      }\n\n      for (const s of scopes) \n      {\n        s.destroy();\n      }\n    },\n  };\n}\n","import { isObject, isFunction, isArray } from 'expangine-runtime';\nimport { NodeCompiler, NodeInstance, getSlots, createChildNodes } from '../Node';\nimport { Scope } from '../Scope';\n\n\nexport interface DefaultEventObject\n{\n  stop: boolean;\n  prevent: boolean;\n  nativeEvent: Event;\n}\n\nexport const CompilerDefault: NodeCompiler = (template, component, scope, parent) => \n{\n  const [tag, attrs, events, childSlots] = template;\n  const element = document.createElement(tag as any) as HTMLElement;\n  const instance: NodeInstance = { elements: [element], component, scope, parent };\n\n  if (isObject(attrs)) \n  {\n    for (const attr in attrs) \n    {\n      const attrValue = attrs[attr];\n      const apply = getPropertySetter(tag as string, attr);\n\n      if (Scope.isWatchable(attrValue)) \n      {\n        scope.watch(attrValue, (v) => \n        {\n          apply(element, v);\n        });\n      }\n      else \n      {\n        apply(element, attrValue);\n      }\n    }\n  }\n\n  if (isObject(events)) \n  {\n    for (const ev in events) \n    {\n      const eventParts = ev.split('.');\n      const eventName = eventParts.shift();\n      const eventValue = events[eventName];\n    \n      const listenerOptions: AddEventListenerOptions = {\n        once:     hasModifier(eventParts, 'once'),\n        passive:  hasModifier(eventParts, 'passive'),\n        capture:  hasModifier(eventParts, 'capture'),\n      };\n\n      const handler = isFunction(eventValue)\n        ? eventValue\n        : scope.eval(eventValue, ['nativeEvent', 'stop', 'prevent']);\n\n      element.addEventListener(eventName, (nativeEvent) => \n      {\n        for (const modifier of eventParts)\n        {\n          if (modifier in modifierHandlers)\n          {\n            if (!modifierHandlers[modifier](element, nativeEvent))\n            {\n              return;\n            }\n          }\n        }\n\n        const eventObject: DefaultEventObject = {\n          nativeEvent,\n          stop: false,\n          prevent: false,\n        };\n\n        if (handler(eventObject, scope) === false) \n        {\n          return false;\n        }\n\n        for (const modifier in eventObject)\n        {\n          if (eventObject[modifier] && modifier in modifierHandlers)\n          {\n            if (!modifierHandlers[modifier](element, nativeEvent))\n            {\n              return;\n            }\n          }\n        }\n\n      }, listenerOptions);\n    }\n  }\n\n  const childs =  getSlots(childSlots);\n\n  if (childs.length > 0) \n  {\n    const childController = createChildNodes(childs, scope, component, instance);\n\n    for (const child of childController.elements)\n    {\n      element.appendChild(child);\n    }\n  }\n\n  return instance;\n};\n\nconst modifierHandlers: Record<string, (el: HTMLElement, ev: Event) => boolean> = {\n  prevent (el: HTMLElement, ev: Event): boolean {\n    if (ev.preventDefault) {\n      ev.preventDefault();\n    }\n\n    return true;\n  },\n  stop (el: HTMLElement, ev: Event): boolean {\n    if (ev.stopPropagation) {\n      ev.stopPropagation();\n    }\n\n    return true;\n  },\n  self (el: HTMLElement, ev: Event): boolean {\n    return ev.target === el;\n  },\n};\n\nfunction hasModifier(modifiers: string[], modifier: string)\n{\n  const i = modifiers.indexOf(modifier);\n  const exists = i >= 0;\n\n  if (exists)\n  {\n    modifiers.splice(i, 1);\n  }\n\n  return exists;\n}\n\nfunction getPropertySetter(tag: string, propPath: string): ((e: HTMLElement, value: any) => void)\n{\n  const path = propPath.split('_');\n  const prop = path[0];\n  const options = getPropertyOptions(prop);\n  const { tags, property, attribute, stringify } = options;\n  const forStyle = attribute.toLowerCase() === 'style';\n  const useProperty = tags !== true && \n    (tags.length === 0 || tags.includes(tag.toLowerCase()));\n\n  if (property && useProperty) \n  {\n    if (path.length > 1)\n    {\n      return (e, value) =>\n      {\n        const n = path.length - 1;\n        let curr = e;\n\n        for (let i = 0; i < n; i++) {\n          const node = path[i];\n          if (!curr[node]) {\n            curr[node] = {};\n          }\n          curr = curr[node];\n        }\n        \n        if (value === undefined || value === null) {\n          delete curr[path[n]];\n        } else {\n          curr[path[n]] = value;\n        }\n      };\n    }\n    else\n    {\n      return (e, value) => \n      {\n        if (value === null || value === undefined || value === '') {\n          e.removeAttribute(attribute);\n        } else if (stringify) {\n          e[property] = convertToString(value, forStyle);\n        } else {\n          e[property] = value;\n        }\n      };\n    }\n  } \n  else \n  {\n    return (e, value) => \n    {\n      const stringValue = convertToString(value, forStyle);\n\n      if (stringValue === '') {\n        e.removeAttribute(attribute);\n      } else {\n        e.setAttribute(attribute, stringValue);\n      }\n    };\n  }\n}\n\ninterface NoProperty\n{\n  property: false;\n  attribute: string;\n  tags: true;\n  stringify: boolean;\n}\n\ninterface HasProperty\n{\n  property: string;\n  attribute: string;\n  tags: string[] | true;\n  stringify: boolean;\n}\n\nfunction getPropertyOptions(prop: string): NoProperty | HasProperty\n{\n  const option = tagSupportByProperty[prop];\n  const attr = propertyToAttribute(prop);\n\n  if (!option) {\n    return {\n      property: false,\n      attribute: attr,\n      tags: true,\n      stringify: false,\n    };\n  }\n\n  return {\n    property: isArray(option) ? prop : option.property || prop,\n    attribute: isArray(option) ? attr : option.attribute || attr,\n    tags: isArray(option) ? option : option.tags || true,\n    stringify: isArray(option) ? false : option.stringify || false,\n  };\n}\n\nfunction propertyToAttribute(camel: string)\n{\n  return camel.replace(/([A-Z])/g, (x) => '-' + x.toLowerCase());\n}\n\nconst tagSupportByProperty: Record<string, string[] | { property?: string, attribute?: string, tags?: string[], stringify?: true }> = {\n  abbr: ['th'],\n  accept: ['input'],\n  acceptCharset: ['form'],\n  accessKey: [],\n  action: ['form'],\n  allow: ['iframe'],\n  allowdirs: ['input'],\n  allowfullscreen: ['iframe'],\n  allowPaymentRequest: ['iframe'],\n  as: ['link'],\n  async: ['script'],\n  autocapitalize: ['textarea'],\n  autocomplete: ['form', 'input', 'textarea'],\n  autofocus: ['button', 'input', 'select', 'textarea'],\n  autoplay: ['audio', 'media'],\n  alt: ['area', 'img'],\n  caption: ['table'],\n  class: {\n    property: 'className',\n    stringify: true,\n  },\n  className: [],\n  charset: ['script'],\n  cite: ['blockquote', 'q', 'cite'],\n  contentEditable: [],\n  coords: ['area'],\n  color: ['basefont'],\n  cols: ['textarea'],\n  colSpan: {\n    tags: ['th', 'td'],\n    attribute: 'colspan',\n  },\n  content: ['meta'],\n  controls: ['audio', 'media'],\n  crossOrigin: {\n    tags: ['img', 'link', 'audio', 'media'],\n    attribute: 'crossorigin',\n  },\n  csp: ['iframe'],\n  currentTime: ['audio', 'media'],\n  data: ['object'],\n  dataset: [],\n  decoding: ['img'],\n  default: ['track'],\n  defaultMuted: ['audio', 'media'],\n  defaultPlaybackRate: ['audio', 'media'],\n  defaultSelected: ['option'],\n  defaultValue: ['input', 'output', 'textarea'],\n  defer: ['script'],\n  dirName: {\n    tags: ['input'],\n    attribute: 'dirname',\n  },\n  dir: [],\n  disabled: ['button', 'fieldset', 'input', 'link', 'optgroup', 'option', 'select', 'style', 'textarea'],\n  disableRemotePlayback: ['audio', 'media'],\n  download: ['a', 'area'],\n  draggable: [],\n  encoding: ['form'],\n  enctype: ['form'],\n  face: ['basefont'],\n  files: ['input'],\n  for: {\n    property: 'htmlFor',\n    tags: ['label'],\n  },\n  form: ['input'],\n  formAction: {\n    tags: ['button', 'input'],\n    attribute: 'formaction',\n  },\n  formEnctype: {\n    tags: ['button', 'input'],\n    attribute: 'formenctype',\n  },\n  formMethod: {\n    tags: ['button', 'input'],\n    attribute: 'formmethod',\n  },\n  formNoValidate: {\n    tags: ['button', 'input'],\n    attribute: 'formnovalidate',\n  },\n  formTarget: {\n    tags: ['button', 'input'],\n    attribute: 'formtarget',\n  },\n  hash: ['a', 'area'],\n  height: ['canvas', 'embed', 'iframe', 'img', 'object', 'video'],\n  hidden: [],\n  host: ['a', 'area'],\n  hostname: ['a', 'area'],\n  href: ['a', 'area', 'base', 'link'],\n  hreflang: ['a', 'area', 'link'],\n  httpEquiv: ['meta'],\n  id: [],\n  inert: [],\n  innerHTML: [],\n  innerText: [],\n  isMap: {\n    tags: ['img'],\n    attribute: 'ismap',\n  },\n  label: ['optgroup', 'track'],\n  lang: [],\n  length: ['select'],\n  loading: ['img'],\n  loop: ['audio', 'media'],\n  kind: ['track'],\n  max: ['input', 'progress'],\n  maxLength: {\n    tags: ['input', 'textarea'],\n    attribute: 'maxlength',\n  },\n  media: ['a', 'area', 'link', 'source', 'style'],\n  mediaGroup: {\n    tags: ['audio', 'media'],\n    attribute: 'mediagroup',\n  },\n  menu: ['button'],\n  method: ['form'],\n  min: ['input'],\n  minLength: {\n    tags: ['input', 'textarea'],\n    attribute: 'minlength'\n  },\n  multiple: ['input', 'select'],\n  muted: ['audio', 'media'],\n  name: ['button', 'fieldset', 'form', 'iframe', 'input', 'map', 'meta', 'object', 'output', 'param', 'select', 'textarea'],\n  noValidate: {\n    tags: ['form'],\n    attribute: 'novalidate',\n  },\n  noModule: ['script'],\n  open: ['dialog'],\n  outerHTML: [],\n  password: ['a', 'area'],\n  pathname: ['a', 'area'],\n  pattern: ['input'],\n  placeholder: ['input', 'textarea'],\n  playbackRate: ['audio', 'media'],\n  port: ['a', 'area'],\n  poster: ['video'],\n  protocol: ['a', 'area'],\n  readOnly: {\n    tags: ['input', 'textarea'],\n    attribute: 'readonly',\n  },\n  referrerPolicy: {\n    tags: ['iframe', 'img', 'link', 'script'],\n    attribute: 'referrerpolicy',\n  },\n  rel: ['a', 'area', 'link'],\n  returnValue: ['dialog'],\n  required: ['input', 'select', 'textarea'],\n  reversed: ['ol'],\n  rows: ['textarea'],\n  rowSpan: {\n    tags: ['td', 'th'],\n    attribute: 'rowspan',\n  },\n  scrollTop: [],\n  sandbox: ['iframe'],\n  scope: ['th'],\n  search: ['area'],\n  select: ['content'],\n  selected: ['option'],\n  selectedIndex: ['select'],\n  selectionStart: ['input', 'textarea'],\n  selectionEnd: ['input', 'textarea'],\n  selectionDirection: ['input', 'textarea'],\n  shape: ['area'],\n  size: ['basefont', 'input', 'select'],\n  sizes: ['img'],\n  src: ['embed', 'iframe', 'img', 'media', 'audio', 'script', 'source', 'track'],\n  srcset: ['img'],\n  srcdoc: ['iframe'],\n  srclang: ['track'],\n  span: ['col', 'colgroup'],\n  start: ['ol'],\n  step: ['input'],\n  style: {\n    tags: [],\n    stringify: true,\n  },\n  tabIndex: {\n    tags: [],\n    attribute: 'tabindex',\n  },\n  target: ['a', 'area', 'base', 'form'],\n  textContent: [],\n  text: ['a', 'option', 'script', 'title'],\n  title: [],\n  type: ['a', 'area', 'button', 'embed', 'input', 'link', 'ol', 'object', 'script', 'source', 'style'],\n  typeMustMatch: {\n    tags: ['object'],\n    attribute: 'typemustmatch',\n  },\n  useMap: {\n    tags: ['img', 'object'],\n    attribute: 'usemap',\n  },\n  username: ['a', 'area'],\n  volume: ['audio', 'media'],\n  validationMessage: ['fieldset'],\n  validity: ['fieldset', 'input'],\n  value: ['button', 'data', 'input', 'li', 'option', 'output', 'param', 'progress', 'select', 'textarea'],\n  width: ['canvas', 'embed', 'iframe', 'img', 'object', 'video'],\n  wrap: ['textarea'],\n};\n\nfunction convertToString(x: any, forStyle: boolean = false): string\n{\n  if (isArray(x))\n  {\n    return x.map((y) => convertToString(y)).filter((y) => Boolean(y)).join(forStyle ? '; ' : ' ');\n  }\n  else if (isObject(x))\n  {\n    const converted = [];\n\n    for (const prop in x)\n    {\n      if (x[prop] || (forStyle && x[prop] === 0))\n      {\n        converted.push(forStyle\n          ? prop + ': ' + convertToString(x[prop])\n          : prop\n        );\n      }\n    }\n\n    return converted.join(forStyle ? '; ' : ' ');\n  }\n  \n  return x === null || x === undefined || x === false ? '' : String(x);\n}","import { NodeCompiler, NodeInstance, changeElements } from '../Node';\nimport { compile } from '../compile';\nimport { Scope } from '../Scope';\n\n\nexport const CompilerDynamic: NodeCompiler = (template, component, scope, parent) =>\n{\n  const [tag] = template;\n  const instance: NodeInstance = { parent, component, scope, elements: [document.createComment('dynamic')] };\n  let lastScope: Scope;\n\n  scope.watch(tag, (tagValue: any) =>\n  {\n    template[0] = tagValue;\n\n    if (lastScope)\n    {\n      lastScope.destroy();\n    }\n\n    lastScope = scope.createChild();\n\n    const dynamicInstance = compile(template, component, lastScope, parent);\n\n    changeElements(instance.elements, dynamicInstance.elements);\n\n  }, true, true);\n\n  return instance;\n};","import { Exprs, AnyOps, defs } from 'expangine-runtime';\nimport { NodeCompiler, NodeInstance, changeElements, createChildNodes, getSlots, NodeChildrenController, isStyleElement } from '../Node';\nimport { DEFAULT_SLOT } from '../constants';\n\n\nexport type HideAction = 'hide' | 'detach' | 'destroy';\n\nexport const CompilerSwitch: NodeCompiler = (template, component, scope, parent) => \n{\n  const [tag, attrs, , childSlots] = template;\n  const directiveName = (tag as string).substring(1);\n  const placeholder = [document.createComment(directiveName)];\n  const elements: Node[] = placeholder.slice();\n  const instance: NodeInstance = { parent, component, scope, elements };\n  const childScope = scope.createChild();\n  \n  if (attrs && attrs.cases && attrs.value)\n  {\n    const mode: HideAction = attrs.mode || 'detach';\n    const value = defs.getExpression(attrs.value);\n\n    const expr = Exprs.switch(value, attrs.isEqual || AnyOps.isEqual);\n    for (const caseName in attrs.cases) {\n      expr.case(attrs.cases[caseName]).than(caseName);\n    }\n    expr.default(DEFAULT_SLOT);\n\n    let lastVisibleSlot: string;\n    let lastController: NodeChildrenController;\n\n    scope.watch(expr, (slotName) =>\n    {\n      const nextTemplate = getSlots(childSlots, slotName);\n\n      if (nextTemplate.length === 0)\n      {\n        childScope.setEnabled(false);\n\n        switch (mode)\n        {\n          case 'detach':\n            changeElements(instance.elements, placeholder);\n            break;\n\n          case 'destroy':\n            if (lastController) \n            {\n              lastController.destroy();\n              lastController = undefined;\n            }\n\n            changeElements(instance.elements, placeholder);\n            break;\n\n          case 'hide':\n            if (lastController) \n            {\n              const hideElements = instance.elements.slice();\n\n              for (let i = 0; i < hideElements.length; i++) \n              {\n                const hide = hideElements[i];\n\n                if (isStyleElement(hide)) \n                {\n                  hide.style.display = 'none';\n                } \n                else \n                {\n                  hideElements[i] = document.createComment('');\n                }\n              }\n\n              changeElements(instance.elements, hideElements);\n            }\n            break;\n        }\n      }\n      else\n      {\n        if (slotName !== lastVisibleSlot || mode === 'destroy')\n        {\n          if (lastController)\n          {\n            lastController.destroy();\n            lastController = undefined;\n          }\n\n          const nextController = createChildNodes(nextTemplate, childScope, component, instance, true);\n\n          changeElements(instance.elements, nextController.elements);\n\n          lastController = nextController;\n          lastVisibleSlot = slotName;\n        }\n        else if (mode === 'detach')\n        {\n          changeElements(instance.elements, lastController.elements);\n        }\n        else\n        {\n          const showElements = instance.elements.slice();\n\n          for (let i = 0; i < showElements.length; i++) \n          {\n            const show = showElements[i];\n\n            if (isStyleElement(show)) \n            {\n              show.style.display = '';\n            } \n            else \n            {\n              showElements[i] = lastController.elements[i];\n            }\n          }\n\n          changeElements(instance.elements, showElements);\n        }\n\n        childScope.setEnabled(true);\n      }\n\n    }, true, true);\n  }\n  else\n  {\n    throw new Error(`The ${tag} directive requires a cases and value attribute.`);\n  }\n\n  return instance;\n};","import { NodeCompiler } from '../Node';\nimport { COMPILER_DEFAULT, COMPILER_DYNAMIC, COMPILER_COMPONENT, DIRECTIVE_IF, DIRECTIVE_SLOT, DIRECTIVE_FOR, DIRECTIVE_SWITCH } from '../constants';\n\nimport { CompilerDefault } from './default';\nimport { CompilerDynamic } from './dynamic';\nimport { CompilerIf } from './if';\nimport { CompilerComponent } from './component';\nimport { CompilerSlot } from './slot';\nimport { CompilerFor } from './for';\nimport { CompilerSwitch } from './switch';\n\n\nexport const compilers: Record<string, NodeCompiler> = {\n  [COMPILER_DEFAULT]: CompilerDefault,\n  [COMPILER_DYNAMIC]: CompilerDynamic,\n  [COMPILER_COMPONENT]: CompilerComponent,\n  [DIRECTIVE_IF]: CompilerIf,  \n  [DIRECTIVE_SLOT]: CompilerSlot,\n  [DIRECTIVE_FOR]: CompilerFor,\n  [DIRECTIVE_SWITCH]: CompilerSwitch,  \n};\n","import { isObject, isFunction } from 'expangine-runtime';\nimport { NodeCompiler, isNamedSlots } from '../Node';\nimport { Scope } from '../Scope';\nimport { ComponentRegistry } from '../ComponentRegistry';\nimport { ComponentInstance } from '../ComponentInstance';\nimport { compile } from '../compile';\n\n\nexport const CompilerComponent: NodeCompiler = (template, parentComponent, scope, parent) => \n{\n  const [id, attrs, events, childSlots] = template;\n  const componentBase = ComponentRegistry[id as string];\n  const localScope = new Scope<any>(null, { emit: {}, refs: {} });\n  const component = new ComponentInstance(componentBase, attrs, localScope, isNamedSlots(childSlots) ? childSlots : undefined, parentComponent, scope);  \n  const addRef = attrs?.ref;\n\n  if (addRef)\n  {\n    delete attrs.ref;\n  }\n\n  if (componentBase.attributes)\n  {\n    for (const attr in componentBase.attributes)\n    {\n      const options = component.getAttributeOptions(attr);\n\n      if (!options || options.callable)\n      {\n        continue;\n      }\n\n      const attrInput = attrs && attr in attrs \n        ? attrs[attr] \n        : isFunction(options.default)\n          ? options.default(component)\n          : options.default;\n\n      if (Scope.isWatchable(attrInput))\n      {\n        let first = true;\n\n        scope.watch(attrInput, (v) =>\n        {\n          localScope.set(attr, v, true);\n\n          if (first && options.initial)\n          {\n            options.initial(v, component);\n          }\n          else if (!first && options.changed)\n          {\n            options.changed(v, component);\n          }\n          if (options.update)\n          {\n            options.update(v, component);\n          }\n\n          if (!first && componentBase.updated)\n          {\n            componentBase.updated(component);\n          }\n          \n          first = false;\n        });\n      }\n      else\n      {\n        localScope.set(attr, attrInput, true);\n      }\n    }\n  }\n\n  if (componentBase.state)\n  {\n    for (const stateName in componentBase.state)\n    {\n      const stateProvider = componentBase.state[stateName];\n      const stateValue = isFunction(stateProvider)\n        ? stateProvider(component)\n        : stateProvider;\n\n      localScope.set(stateName, localScope.evalNow(stateValue), true);\n    }\n  }\n\n  if (componentBase.computed)\n  {\n    for (const computedName in componentBase.computed)\n    {\n      const computedProvider = componentBase.computed[computedName];\n      const computedValue = isFunction(computedProvider)\n        ? computedProvider(component)\n        : computedProvider;\n\n      localScope.watch(computedValue, (value) => \n      {\n        localScope.set(computedName, value, true);\n      });\n    }\n  }\n\n  if (isObject(events) && componentBase.events) \n  {\n    for (const ev in events) \n    {\n      if (!(ev in componentBase.events))\n      {\n        continue;\n      }\n\n      const eventValue = events[ev];\n\n      if (Scope.isWatchable(eventValue)) \n      {\n        const eventTypeInput = componentBase.events[ev];\n        const eventType = isFunction(eventTypeInput)\n          ? eventTypeInput({})\n          : eventTypeInput;\n\n        const props = Object.keys(eventType.options.props);\n        const listener = scope.eval(eventValue, props);\n\n        component.on(ev, listener);\n      }\n    }\n  }\n\n  const rendered = componentBase.render(component);\n  const instance = compile(rendered, component, localScope, parent);\n\n  component.node = instance;\n\n  if (componentBase.created) \n  {\n    componentBase.created(component);\n  }\n\n  if (addRef && parentComponent)\n  {\n    parentComponent.scope.observed.refs[addRef] = localScope.observed;\n  }\n  \n  return instance;\n};","import { BooleanOps } from 'expangine-runtime';\nimport { NodeCompiler } from '../Node';\nimport { CompilerSwitch } from './switch';\n\n\nexport const CompilerIf: NodeCompiler = ([tag, attrs, events, childSlots], component, scope, parent) => \n  CompilerSwitch([tag, { value: true, isEqual: BooleanOps.isEqual, ...attrs }, events, childSlots], component, scope, parent)\n;","import { NodeCompiler, NodeInstance, NodeChildrenController, getSlots, createChildNodes, changeElements } from '../Node';\nimport { Exprs, isArray, isSet, isMap, isObject, isNumber } from 'expangine-runtime';\n\n\nexport const CompilerFor: NodeCompiler = (template, component, scope, parent) => \n{\n  const [, attrs, , childSlots] = template;\n  const placeholder = document.createComment('for');\n  const element = [placeholder];\n  const instance: NodeInstance = { parent, component, scope, elements: element };\n  const itemTemplate = getSlots(childSlots);\n\n  if (attrs && attrs.items)\n  {\n    const propItem = attrs.item || 'item';\n    const propIndex = attrs.index || 'index';\n    const propKey = attrs.key || Exprs.get(propIndex);\n\n    const getKey = scope.eval(propKey, [propItem, propIndex]);\n    const map = new Map<any, NodeChildrenController>();\n\n    scope.watch(attrs.items, (items) =>\n    {\n      const newChildren: Node[] = [];\n      const keys = new Set();\n\n      iterateCollection(items, (item, itemIndex) =>\n      {\n        const itemScopeData = { [propItem]: item, [propIndex]: itemIndex };\n        const itemKey = getKey(itemScopeData);\n        let itemController = map.get(itemKey);\n\n        if (!itemController)\n        {\n          const itemScope = scope.createChild(itemScopeData);\n\n          itemController = createChildNodes(itemTemplate, itemScope, component, instance);\n\n          map.set(itemKey, itemController);\n        }\n        else\n        {\n          itemController.updateScopes(itemScopeData);\n        }\n\n        keys.add(itemKey);\n        newChildren.push(...itemController.elements);\n      });\n\n      if (newChildren.length === 0)\n      {\n        newChildren.push(placeholder);\n      }\n\n      changeElements(instance.elements, newChildren);\n\n      map.forEach((itemController, itemIndex) => \n      {\n        if (!keys.has(itemIndex)) \n        {\n          itemController.destroy();\n\n          map.delete(itemIndex);\n        }\n      });\n    });\n  }\n\n  return instance;\n};\n\nfunction iterateCollection(collection: any, callback: (item: any, index: any) => void)\n{\n  if (isArray(collection))\n  {\n    for (let index = 0; index < collection.length; index++)\n    {\n      callback(collection[index], index);\n    }\n  }\n  else if (isSet(collection))\n  {\n    let index = 0;\n\n    for (const item of collection)\n    {\n      callback(item, index++);\n    }\n  }\n  else if (isMap(collection))\n  {\n    for (const [key, value] of collection.entries())\n    {\n      callback(value, key);\n    }\n  }\n  else if (isObject(collection))\n  {\n    for (const key in collection)\n    {\n      callback(collection[key], collection);\n    }\n  }\n  else if (isNumber(collection))\n  {\n    for (let i = 0; i < collection; i++)\n    {\n      callback(i, i);\n    }\n  }\n}","import { ExpressionValue, Expression, Exprs } from \"expangine-runtime\";\nimport { HideAction } from './compilers/switch';\nimport { NodeTemplate, NodeTemplateChild } from \"./Node\";\nimport { DIRECTIVE_IF, DIRECTIVE_FOR, DIRECTIVE_SLOT, DIRECTIVE_SWITCH } from \"./constants\";\nimport { Component } from \"./Component\";\n\nexport function createIf(condition: ExpressionValue, truthy: NodeTemplateChild[], mode: HideAction = 'detach'): NodeTemplate\n{\n    return createIfs([[condition, truthy]], undefined, mode);\n}\n\nexport function createIfElse(condition: ExpressionValue, truthy: NodeTemplateChild[], falsy: NodeTemplateChild[], mode: HideAction = 'detach'): NodeTemplate\n{\n    return createIfs([[condition, truthy]], falsy, mode);\n}\n\nexport function createIfs(cases: [ExpressionValue, NodeTemplateChild[]][], otherwise?: NodeTemplateChild[], mode: HideAction = 'detach'): NodeTemplate\n{\n    return [DIRECTIVE_IF, {\n        mode,\n        cases: cases.reduce((out, [expr,], key) => (out[key] = expr, out), {}),\n    }, {}, {\n        ...cases.reduce((out, [,tmpl], key) => (out[key] = tmpl, out), {}),\n        default: otherwise,\n    }];\n}\n\nexport function createShow(condition: ExpressionValue, truthy: NodeTemplateChild[]): NodeTemplate\n{\n    return createIfs([[condition, truthy]], undefined, 'hide');\n}\n\nexport function createHide(condition: ExpressionValue, truthy: NodeTemplateChild[]): NodeTemplate\n{\n    return createIfs([[Exprs.not(condition), truthy]], undefined, 'hide');\n}\n\nexport function createSwitch(value: ExpressionValue, cases: [ExpressionValue, NodeTemplateChild[]][], defaultCase?: ExpressionValue, isEqual?: string): NodeTemplate\n{\n    return [DIRECTIVE_SWITCH, {\n        value,\n        cases: cases.reduce((out, [expr,], key) => (out[key] = expr, out), {}),\n        isEqual,\n    }, {}, {\n        ...cases.reduce((out, [,tmpl], key) => (out[key] = tmpl, out), {}),\n        default: defaultCase,\n    }];\n}\n\nexport function createComponent<A, E, S extends string, L, C>(\n    component: Component<A, E, S, L, C>, \n    attributes: Partial<Record<keyof A, ExpressionValue> & { ref: string }> = {}, \n    events: Partial<Record<keyof E, ExpressionValue>> = {}, \n    slots: Partial<Record<S | 'default', NodeTemplateChild[] | Record<string, NodeTemplateChild[]>>> = {}\n): NodeTemplate {\n    return [`${component.collection}/${component.name}`,\n        attributes,\n        events,\n        slots,\n    ];\n}\n\nexport function createFor(items: Expression, children: NodeTemplateChild[], options: { index?: string, item?: string, key?: ExpressionValue } = {}): NodeTemplate\n{\n    return [DIRECTIVE_FOR, {\n        items,\n        ...options,\n    }, {}, \n        children,\n    ];\n}\n\nexport function createSlot(attrs: { name?: string, scope?: Record<string, ExpressionValue>, slotIndex?: ExpressionValue } = {}, children: NodeTemplateChild[] = []): NodeTemplate\n{\n    return [DIRECTIVE_SLOT, attrs, {}, children];\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__476__;","module.exports = __WEBPACK_EXTERNAL_MODULE__538__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(668);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}